===============================================================================
META BUSINESS MANAGER - WHATSAPP TEMPLATE SUBMISSION GUIDE
===============================================================================

This guide walks you through submitting Parcelo's WhatsApp templates to Meta
for approval. Complete this BEFORE writing any template-sending code.

===============================================================================
PREREQUISITES
===============================================================================

1. WhatsApp Business Account verified in Meta Business Manager
2. Phone number connected and verified
3. Admin access to Meta Business Manager
4. Payment method added (for template message costs)

===============================================================================
STEP-BY-STEP SUBMISSION PROCESS
===============================================================================

STEP 1: Access Message Templates
---------------------------------
1. Go to: https://business.facebook.com
2. Click on your Business Account
3. Navigate to: WhatsApp Manager → Message Templates
4. Click: "Create Template"


STEP 2: Choose Template Category
---------------------------------
For each template, select the appropriate category:

CRITICAL TEMPLATES (Submit First):
  ✅ quotation_ready → UTILITY
  ✅ payment_request → UTILITY
  ✅ payment_confirmed → UTILITY
  ✅ escalation_created → UTILITY
  ✅ magic_link_access → AUTHENTICATION

IMPORTANT TEMPLATES (Submit Second):
  ⚠️ order_shipped → UTILITY
  ⚠️ order_delivered → UTILITY
  ⚠️ subscription_confirmed → UTILITY
  ⚠️ agent_response → UTILITY

OPTIONAL TEMPLATES (Submit Later):
  💡 cart_reminder → MARKETING
  💡 wishlist_price_drop → MARKETING


STEP 3: Fill Template Details
---------------------------------
For each template:

A. TEMPLATE NAME:
   - Use snake_case (e.g., quotation_ready)
   - No spaces, lowercase only
   - Must be unique
   - Cannot be changed after approval

B. LANGUAGE:
   - Start with: English (en)
   - Add more languages later (Luganda, Swahili)

C. CATEGORY:
   - UTILITY: Business updates, confirmations, account changes
   - AUTHENTICATION: OTP, magic links, security codes
   - MARKETING: Promotions, upsells, reminders
   
   ⚠️ UTILITY templates approved faster than MARKETING!


STEP 4: Build Template Components
---------------------------------

HEADER (Optional but recommended):
  Format options:
    - TEXT: "🔐 Website Access Link"
    - IMAGE: Product images (not yet needed)
    - VIDEO: Promotional videos (not yet needed)
    - DOCUMENT: ✅ USE THIS for quotations, receipts
    
  For document headers:
    - Select "Document" format
    - You'll provide URL when sending (not now)
    - Meta will show placeholder in preview

BODY (Required):
  - Main message content
  - Use {{1}}, {{2}}, {{3}} for variables
  - Max 1024 characters
  - Can use emojis ✅
  - Line breaks allowed
  
  Example:
    "✅ Your quotation is ready!
    
    📦 Items: {{1}}
    💰 Total Cost: {{2}} UGX
    🚚 Est. Delivery: {{3}}
    
    Review the attached quotation document."

FOOTER (Optional):
  - Small text at bottom
  - No variables allowed
  - Max 60 characters
  
  Example: "Parcelo - Shop Global, Delivered Local"

BUTTONS (Optional but recommended):
  
  QUICK REPLY buttons:
    - Max 3 buttons
    - Max 25 characters per button
    - User clicks → payload sent to your webhook
    - Great for: "Add to Cart", "Track Order", "View Details"
    
    Example buttons for quotation_ready:
      Button 1: "Add to Cart 🛒"
      Button 2: "Save to Wishlist ❤️"
      Button 3: "Modify Quote ✏️"
  
  URL buttons:
    - Max 2 URL buttons
    - Opens link in browser
    - Use {{1}} for dynamic URL
    - Great for: Payment links, tracking links, magic links
    
    Example for payment_request:
      Button: "Pay Now 💳"
      URL: {{1}}
      (You'll pass actual Pesapal URL when sending)
  
  CALL buttons:
    - Opens phone dialer
    - Static phone number only
    - Not recommended (we want to keep users in WhatsApp)


STEP 5: Add Sample Data
---------------------------------
Meta requires examples of what variables will contain:

Example for quotation_ready:
  Variable {{1}}: "3 items"
  Variable {{2}}: "450,000"
  Variable {{3}}: "7-10 business days"

This helps Meta review and show you preview.


STEP 6: Review Preview
---------------------------------
Meta shows preview of how template will look:
  - Check formatting
  - Verify emojis display correctly
  - Test button layout
  - Ensure variables make sense

Common issues to check:
  ❌ Text too long (truncated on mobile)
  ❌ Too many buttons (max 3 quick replies OR 2 URLs)
  ❌ Variables in wrong order
  ❌ Typos or grammar errors
  ⚠️ Cannot fix after submission!


STEP 7: Submit for Review
---------------------------------
Click "Submit" and wait for approval.

Approval times:
  ⚡ AUTHENTICATION: 1-4 hours (fast-tracked)
  ✅ UTILITY: 24-48 hours typically
  ⏳ MARKETING: 2-5 days (stricter review)

You'll receive email notification when approved/rejected.


STEP 8: Handle Rejections
---------------------------------
If rejected, common reasons:

1. POLICY VIOLATION:
   - Promotional language in UTILITY template
   - Missing opt-out instructions (not needed for utility)
   - Misleading content
   
2. FORMAT ISSUES:
   - Too many variables
   - Invalid variable format
   - Button text unclear
   
3. EXAMPLES UNCLEAR:
   - Sample data doesn't make sense
   - Variables not matching context
   
Fix issues and resubmit. Usually approved on 2nd try.

===============================================================================
PRIORITY SUBMISSION ORDER
===============================================================================

WEEK 1 - CRITICAL (Submit Monday):
-----------------------------------
Day 1:
  1. quotation_ready (with document header)
  2. payment_request (with URL button)
  3. magic_link_access (with URL button)

Day 2:
  4. payment_confirmed (with document header)
  5. escalation_created

Expected approval: By Friday


WEEK 2 - IMPORTANT (After first 5 approved):
---------------------------------------------
Day 8:
  6. order_shipped (with URL button)
  7. order_delivered (with rating buttons)
  8. subscription_confirmed (with document header)
  9. agent_response

Expected approval: Within 2-3 days


WEEK 3 - OPTIONAL (Marketing):
-------------------------------
Day 14:
  10. cart_reminder
  11. wishlist_price_drop

Expected approval: 3-5 days (MARKETING reviewed slower)

===============================================================================
TEMPLATE SPECIFICATIONS
===============================================================================

1. QUOTATION_READY
------------------
Name: quotation_ready
Category: UTILITY
Language: en

Header:
  Format: DOCUMENT
  
Body:
  ✅ Your quotation is ready!
  
  📦 Items: {{1}}
  💰 Total Cost: {{2}} UGX
  🚚 Est. Delivery: {{3}}
  
  Review the attached quotation document for full details.

Buttons:
  [Quick Reply] Add to Cart 🛒
  [Quick Reply] Save to Wishlist ❤️
  [Quick Reply] Modify Quote ✏️

Sample:
  {{1}}: 3 items
  {{2}}: 450,000
  {{3}}: 7-10 business days


2. PAYMENT_REQUEST
-------------------
Name: payment_request
Category: UTILITY
Language: en

Header:
  Format: TEXT
  Text: 💳 Payment Required

Body:
  Hi {{1}},
  
  Your order #{{2}} is ready for payment.
  
  💰 Amount: {{3}} UGX
  📦 Items: {{4}}
  
  Complete payment to proceed with shipping.

Buttons:
  [URL] Pay Now 💳 → {{1}}
  [Quick Reply] Pay with MoMo 📱
  [Quick Reply] Need Help ❓

Sample:
  {{1}}: John
  {{2}}: ORD-2025-001
  {{3}}: 350,000
  {{4}}: 2 items
  URL {{1}}: https://pay.pesapal.com/iframe/PTC-XXX


3. PAYMENT_CONFIRMED
---------------------
Name: payment_confirmed
Category: UTILITY
Language: en

Header:
  Format: DOCUMENT

Body:
  ✅ Payment Received!
  
  Order: #{{1}}
  Amount: {{2}} UGX
  Paid: {{3}}
  
  🚚 Your order is now being prepared for shipping.
  
  Download your receipt attached above.

Buttons:
  [Quick Reply] Track Order 📦
  [Quick Reply] View Details 📋

Sample:
  {{1}}: ORD-2025-001
  {{2}}: 350,000
  {{3}}: Oct 15, 2025 2:30 PM


4. ESCALATION_CREATED
----------------------
Name: escalation_created
Category: UTILITY
Language: en

Header:
  Format: TEXT
  Text: 🙋 Connected to Support Team

Body:
  I've created a support ticket for you.
  
  🎫 Ticket: {{1}}
  ⏱️ Priority: {{2}}
  👤 Agent: Assigning...
  
  A human agent will respond within {{3}}.

Buttons:
  [Quick Reply] Check Status 📋
  [Quick Reply] Add Info ➕

Sample:
  {{1}}: TKT-2025-001
  {{2}}: High
  {{3}}: 15 minutes


5. MAGIC_LINK_ACCESS
--------------------
Name: magic_link_access
Category: AUTHENTICATION
Language: en

Header:
  Format: TEXT
  Text: 🔐 Website Access Link

Body:
  Click the link below to access your Parcelo account:
  
  ⏰ Expires in 1 hour
  🔒 Secure automatic login
  
  You'll be able to view all your orders, quotations, and account details.

Buttons:
  [URL] Open Account 🌐 → {{1}}

Sample:
  URL {{1}}: https://parceloug.com/auth/magic?token=abc123


6. ORDER_SHIPPED
----------------
Name: order_shipped
Category: UTILITY
Language: en

Header:
  Format: TEXT
  Text: 📦 Your Order is On the Way!

Body:
  Great news! Order #{{1}} has been shipped.
  
  📍 Tracking: {{2}}
  🚚 Carrier: {{3}}
  📅 Est. Delivery: {{4}}
  
  Track your package in real-time.

Buttons:
  [URL] Track Package 📍 → {{1}}
  [Quick Reply] Update Address 📮

Sample:
  {{1}}: ORD-2025-001
  {{2}}: TRK-123456789
  {{3}}: DHL Uganda
  {{4}}: Oct 22, 2025
  URL {{1}}: https://track.dhl.com/TRK-123456789


7. ORDER_DELIVERED
------------------
Name: order_delivered
Category: UTILITY
Language: en

Header:
  Format: TEXT
  Text: ✅ Delivered Successfully!

Body:
  Your order #{{1}} was delivered on {{2}}.
  
  📦 Items: {{3}}
  
  We hope you love your purchase! Please take a moment to rate your experience.

Buttons:
  [Quick Reply] ⭐⭐⭐⭐⭐ Excellent
  [Quick Reply] ⭐⭐⭐⭐ Good
  [Quick Reply] ⭐⭐⭐ Average

Sample:
  {{1}}: ORD-2025-001
  {{2}}: Oct 20, 2025
  {{3}}: 2 items


8. SUBSCRIPTION_CONFIRMED
-------------------------
Name: subscription_confirmed
Category: UTILITY
Language: en

Header:
  Format: DOCUMENT

Body:
  🎉 Welcome to {{1}}!
  
  ✅ Subscription Active
  💰 {{2}} UGX/{{3}}
  📅 Renews: {{4}}
  
  Your upgraded benefits are now active. Receipt attached above.

Buttons:
  [Quick Reply] View Benefits 🎁
  [Quick Reply] Manage Plan ⚙️

Sample:
  {{1}}: Parcelo Plus
  {{2}}: 51,900
  {{3}}: month
  {{4}}: Nov 15, 2025


9. AGENT_RESPONSE
-----------------
Name: agent_response
Category: UTILITY
Language: en

Header:
  Format: TEXT
  Text: 👤 Support Agent Reply

Body:
  {{1}} from Parcelo support:
  
  {{2}}
  
  Ticket: {{3}}

Buttons:
  [Quick Reply] Reply to Agent 💬
  [Quick Reply] Close Ticket ✅

Sample:
  {{1}}: Sarah
  {{2}}: I've reviewed your case and issued a full refund. You should see it in 3-5 business days.
  {{3}}: TKT-2025-001

===============================================================================
POST-APPROVAL CHECKLIST
===============================================================================

After templates are approved:

1. Document Template Names
   - Create spreadsheet with all approved template names
   - Note exact variable order for each
   - Keep copy of approval emails

2. Test Each Template
   - Send test message to your phone
   - Verify formatting looks correct
   - Test all button clicks
   - Check document attachments work

3. Prepare Media Assets
   - Set up CDN for quotation PDFs
   - Set up CDN for receipt PDFs
   - Ensure all URLs are HTTPS
   - Test document downloads

4. Implement Sending Logic
   - NOW you can write code to send templates
   - Use exact template names from Meta
   - Match variable order exactly
   - Handle quick reply payloads

5. Monitor Metrics
   - Template delivery rate
   - Button click-through rate
   - Customer engagement
   - Costs vs plain text

===============================================================================
COST CONSIDERATIONS
===============================================================================

Template message pricing (Uganda):
  - Utility templates: ~$0.03-0.05 per message
  - Marketing templates: ~$0.10-0.15 per message
  - Authentication templates: ~$0.01-0.02 per message

Plain text messages: FREE within 24-hour window

Optimization tips:
  ✅ Use templates for transactional events only
  ✅ Use plain text for conversational responses
  ✅ Don't send unnecessary templates
  ✅ Batch notifications when possible

===============================================================================
COMMON MISTAKES TO AVOID
===============================================================================

❌ Submitting templates before they're needed
❌ Using wrong category (Marketing when should be Utility)
❌ Too many variables (keep under 5 per template)
❌ Unclear button text
❌ Forgetting to test on mobile device
❌ Writing code before approval
❌ Not documenting variable order
❌ Assuming instant approval
❌ Not having backup plan if rejected

===============================================================================
SUPPORT & RESOURCES
===============================================================================

Meta Documentation:
  https://developers.facebook.com/docs/whatsapp/message-templates

Meta Business Support:
  https://business.facebook.com/help

Template Best Practices:
  https://developers.facebook.com/docs/whatsapp/message-templates/guidelines

===============================================================================
NEXT STEPS
===============================================================================

✅ Week 1: Submit 5 critical templates to Meta
⏳ Week 1-2: Wait for approval (check email daily)
✅ Week 2: Test approved templates
✅ Week 2-3: Submit remaining templates
⏳ Week 3: Wait for approval
✅ Week 3-4: Implement template-sending code
✅ Week 4: Launch with templates enabled

===============================================================================
DO NOT WRITE CODE UNTIL TEMPLATES ARE APPROVED! ✅
===============================================================================
